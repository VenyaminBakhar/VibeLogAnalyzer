–ò—Ç–æ–≥–æ–≤—ã–π –ø—Ä–æ–º—Ç –¥–ª—è codegen‚Äë–∞–≥–µ–Ω—Ç–∞
–ó–∞–¥–∞—á–∞

–°–æ–∑–¥–∞—Ç—å –≤–µ–±‚Äë–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ Java (Spring Boot) + React (TypeScript) + ClickHouse, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç:

    –•—Ä–∞–Ω–∏—Ç—å –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å —à–∞–±–ª–æ–Ω–∞–º–∏ –ª–æ–≥–æ–≤ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.
    –•—Ä–∞–Ω–∏—Ç—å –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å API‚Äë–∫–ª—é—á–æ–º –¥–ª—è DeepSeek.
    –ü—Ä–∏–Ω–∏–º–∞—Ç—å –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–º —è–∑—ã–∫–µ, –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤—ã–≤–∞—Ç—å –∏—Ö –≤ SQL —á–µ—Ä–µ–∑ DeepSeek API, –≤—ã–ø–æ–ª–Ω—è—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ ClickHouse –∏ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤–º–µ—Å—Ç–µ —Å —Ç–µ–∫—Å—Ç–æ–≤—ã–º –∞–Ω–∞–ª–∏–∑–æ–º.

üìå –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

    Backend: Java (Spring Boot)
    Database: ClickHouse
    Frontend: React (TypeScript)
    LLM Integration: DeepSeek API (https://api-docs.deepseek.com/)
    –°–±–æ—Ä–∫–∞: docker-compose (backend, frontend, ClickHouse)

üìå –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î –≤ ClickHouse

–¢–∞–±–ª–∏—Ü–∞ –ª–æ–≥–æ–≤:

CREATE TABLE logs
(
  id UInt64,
  timestamp DateTime,
  log_level String,
  message String
)
ENGINE = MergeTree
ORDER BY (timestamp);

–¢–∞–±–ª–∏—Ü–∞ —à–∞–±–ª–æ–Ω–æ–≤ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (CRUD):

CREATE TABLE log_patterns
(
  id UInt64,
  log_level String,
  log_template String
)
ENGINE = MergeTree
ORDER BY (id);

–¢–∞–±–ª–∏—Ü–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ (API KEY):

CREATE TABLE app_settings
(
  id UInt64,
  setting_key String,
  setting_value String
)
ENGINE = MergeTree
ORDER BY (id);

    API‚Äë–∫–ª—é—á —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ app_settings —Å –∫–ª—é—á–æ–º "deepseek_api_key".

üìå –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π —Ñ–ª–æ—É
1. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞–º–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏

–í–∫–ª–∞–¥–∫–∞ Settings –≤ UI:

    –¢–∞–±–ª–∏—Ü–∞ —Å —à–∞–±–ª–æ–Ω–∞–º–∏ –ª–æ–≥–æ–≤ (log_level, log_template) —Å CRUD‚Äë–æ–ø–µ—Ä–∞—Ü–∏—è–º–∏.
    –§–æ—Ä–º–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è API‚Äë–∫–ª—é—á–æ–º DeepSeek:
        –ü–æ–ª–µ –¥–ª—è –≤–≤–æ–¥–∞ –Ω–æ–≤–æ–≥–æ –∫–ª—é—á–∞.
        –ö–Ω–æ–ø–∫–∞ ¬´–°–æ—Ö—Ä–∞–Ω–∏—Ç—å¬ª.
        –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–ª—é—á.

Backend: –∫–ª—é—á —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ app_settings. –ü—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ –∫ DeepSeek backend –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–π –∫–ª—é—á –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –µ–≥–æ –≤ Authorization‚Äë–∑–∞–≥–æ–ª–æ–≤–∫–µ.
2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞

–í–æ –≤–∫–ª–∞–¥–∫–µ Query –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–º —è–∑—ã–∫–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä: ¬´–ø–æ—á–µ–º—É —Å–µ—Ä–≤–∏—Å —É–ø–∞–ª –≤—á–µ—Ä–∞ –≤–µ—á–µ—Ä–æ–º?¬ª).

Backend –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–ª–µ–¥—É—é—â—É—é –ª–æ–≥–∏–∫—É:

    –§–æ—Ä–º–∏—Ä—É–µ—Ç –ø—Ä–æ–º—Ç –∫ DeepSeek (–¥–ª—è SQL‚Äë–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏), –ø–µ—Ä–µ–¥–∞–≤–∞—è:
        —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã logs,
        —Å–ø–∏—Å–æ–∫ —à–∞–±–ª–æ–Ω–æ–≤ –∏–∑ log_patterns,
        —Ç–µ–∫—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞.

    DeepSeek –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç SQL‚Äë–∑–∞–ø—Ä–æ—Å –∫ ClickHouse.

    Backend –≤—ã–ø–æ–ª–Ω—è–µ—Ç SQL —Å –±–µ–∑–æ–ø–∞—Å–Ω—ã–º–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏:
        —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã logs,
        LIMIT 1000 –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

    –ò–∑–≤–ª–µ—á—ë–Ω–Ω—ã–µ –ª–æ–≥–∏ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ –≤—Ç–æ—Ä–æ–π –ø—Ä–æ–º—Ç DeepSeek:
        –∫–æ–Ω—Ç–µ–∫—Å—Ç = –∏—Å—Ö–æ–¥–Ω—ã–π –∑–∞–ø—Ä–æ—Å + –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –ª–æ–≥–∏,
        —Ä–µ–∑—É–ª—å—Ç–∞—Ç = —Ç–µ–∫—Å—Ç–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑ (–æ–±—ä—è—Å–Ω–µ–Ω–∏–µ + —Å–ø–∏—Å–æ–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –ª–æ–≥–æ–≤).

    UI –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
        –ê–Ω–∞–ª–∏–∑ –≤ –≤–∏–¥–µ —Ç–µ–∫—Å—Ç–∞.
        –ö–Ω–æ–ø–∫–∞ ¬´–ü–æ–∫–∞–∑–∞—Ç—å –¥–µ—Ç–∞–ª–∏¬ª —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—É –ª–æ–≥–æ–≤ (timestamp, log_level, message).

üìå UI (React)

–í–∫–ª–∞–¥–∫–∞ Query:

    –ü–æ–ª–µ –¥–ª—è –≤–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞.
    –ö–Ω–æ–ø–∫–∞ ¬´–ù–∞–π—Ç–∏¬ª.
    –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ DeepSeek (—Ç–µ–∫—Å—Ç–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑).
    –ö–Ω–æ–ø–∫–∞ ¬´–ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –ª–æ–≥–∏¬ª —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—É.

–í–∫–ª–∞–¥–∫–∞ Settings:

    –¢–∞–±–ª–∏—Ü–∞ —à–∞–±–ª–æ–Ω–æ–≤ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (CRUD).
    –§–æ—Ä–º–∞ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ —à–∞–±–ª–æ–Ω–∞ (log_level, log_template).
    CRUD‚Äë–∫–Ω–æ–ø–∫–∏ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è/—É–¥–∞–ª–µ–Ω–∏—è —à–∞–±–ª–æ–Ω–æ–≤.
    –§–æ—Ä–º–∞ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è API‚Äë–∫–ª—é—á–∞ DeepSeek.

üìå Backend REST API (Spring Boot)
CRUD –¥–ª—è —à–∞–±–ª–æ–Ω–æ–≤

    GET /api/patterns ‚Äî —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —à–∞–±–ª–æ–Ω–æ–≤
    POST /api/patterns ‚Äî —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —à–∞–±–ª–æ–Ω
    PUT /api/patterns/{id} ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å —à–∞–±–ª–æ–Ω
    DELETE /api/patterns/{id} ‚Äî —É–¥–∞–ª–∏—Ç—å —à–∞–±–ª–æ–Ω

–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ API‚Äë–∫–ª—é—á–æ–º DeepSeek

    GET /api/settings/deepseek_api_key ‚Äî –ø–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–∏–π API‚Äë–∫–ª—é—á (–±–µ–∑–æ–ø–∞—Å–Ω—ã–π –≤—ã–≤–æ–¥, –Ω–∞–ø—Ä–∏–º–µ—Ä –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π)
    POST /api/settings/deepseek_api_key ‚Äî —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å/–æ–±–Ω–æ–≤–∏—Ç—å –∫–ª—é—á

–†–∞–±–æ—Ç–∞ —Å –∑–∞–ø—Ä–æ—Å–∞–º–∏

    POST /api/query
    –í—Ö–æ–¥:

{ "query": "–ø–æ—á–µ–º—É —É–ø–∞–ª —Å–µ—Ä–≤–∏—Å –≤—á–µ—Ä–∞ –≤–µ—á–µ—Ä–æ–º?" }

–õ–æ–≥–∏–∫–∞:

    DeepSeek ‚Üí SQL (—É—á–∏—Ç—ã–≤–∞—è logs + log_patterns)
    SQL ‚Üí ClickHouse ‚Üí –≤—ã–±–æ—Ä–∫–∞ –ª–æ–≥–æ–≤
    DeepSeek ‚Üí –∞–Ω–∞–ª–∏–∑ –∑–∞–ø—Ä–æ—Å–∞ + –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –ª–æ–≥–æ–≤

–í—ã—Ö–æ–¥:

{
  "analysis": "–°–µ—Ä–≤–∏—Å —É–ø–∞–ª –∏–∑-–∑–∞ –æ—à–∏–±–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö.",
  "logs": [
    {
      "id": 123,
      "timestamp": "2024-06-01T12:00:00",
      "log_level": "ERROR",
      "message": "Connection refused to database"
    }
  ]
}

üìå –°–ø–µ—Ü. –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∞–≥–µ–Ω—Ç—É

    SQL‚Äë–∑–∞–ø—Ä–æ—Å—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω—ã–º–∏ (—Ç–æ–ª—å–∫–æ SELECT, LIMIT 1000 –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é).
    DeepSeek –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è = –¥–≤–∞ —ç—Ç–∞–ø–∞ (SQL‚Äë–≥–µ–Ω–µ—Ä–∞—Ü–∏—è + —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑).
    API‚Äë–∫–ª—é—á —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –±–∞–∑–µ (app_settings) –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º DeepSeek‚Äë–∑–∞–ø—Ä–æ—Å–µ.
    –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å docker-compose (backend + frontend + ClickHouse).



1. –ü—Ä–æ–º—Ç –¥–ª—è —Å–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è sql –∑–∞–ø—Ä–æ—Å–∞:
–¢—ã ‚Äî –ø–æ–º–æ—â–Ω–∏–∫ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ SQL-–∑–∞–ø—Ä–æ—Å–æ–≤ –∫ ClickHouse –Ω–∞ –æ—Å–Ω–æ–≤–µ –ª–æ–≥–æ–≤.

–¢–µ–±–µ –¥–∞–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –≤ ClickHouse, –≥–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –ª–æ–≥–∏, –∏ —à–∞–±–ª–æ–Ω—ã –ª–æ–≥–æ–≤ –∏–∑ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞. –ù–∞ –æ—Å–Ω–æ–≤–µ –∑–∞–ø—Ä–æ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω—É–∂–Ω–æ –ø–æ—Å—Ç—Ä–æ–∏—Ç—å SQL-–∑–∞–ø—Ä–æ—Å –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –ª–æ–≥–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–º–æ–≥—É—Ç –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –∑–∞–ø—Ä–æ—Å. –ó–∞–ø—Ä–æ—Å –¥–æ–ª–∂–µ–Ω —É—á–∏—Ç—ã–≤–∞—Ç—å –í–°–ï —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã –ª–æ–≥–æ–≤, –≤–∫–ª—é—á–∞—è —É—Å–ø–µ—à–Ω—ã–µ, –Ω–µ—É—Å–ø–µ—à–Ω—ã–µ –∏ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏, —á—Ç–æ–±—ã –¥–∞—Ç—å –ø–æ–ª–Ω—É—é –∫–∞—Ä—Ç–∏–Ω—É.
–ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è SQL:

    –ê–Ω–∞–ª–∏–∑–∏—Ä—É–π –∑–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —à–∞–≥ –∑–∞ —à–∞–≥–æ–º:
        –û–ø—Ä–µ–¥–µ–ª–∏ –∫–ª—é—á–µ–≤—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, userId, requestId, userName, email, sessionId –∏ —Ç.–¥.) –∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π).
        –ù–µ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è, —á—Ç–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã —è–≤–ª—è—é—Ç—Å—è —á–∏—Å–ª–∞–º–∏. –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –º–æ–≥—É—Ç –±—ã—Ç—å —á–∏—Å–ª–æ–≤—ã–º–∏, —Å—Ç—Ä–æ–∫–æ–≤—ã–º–∏, UUID, email-–∞–¥—Ä–µ—Å–∞–º–∏ –∏ —Ç.–ø.

    –£—á–∏—Ç—ã–≤–∞–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É –ª–æ–≥–∞–º–∏:
        –ï—Å–ª–∏ –¥–ª—è –ø–æ–∏—Å–∫–∞ —Ü–µ–ª–µ–≤—ã—Ö –ª–æ–≥–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —É—Å–ø–µ—Ö–∞/–Ω–µ—É–¥–∞—á–∏) –Ω—É–∂–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏–∑ –¥—Ä—É–≥–∏—Ö –ª–æ–≥–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, requestId –∏–∑ —Å—Ç–∞—Ä—Ç–æ–≤–æ–≥–æ –ª–æ–≥–∞ –ø–æ userId), –∏—Å–ø–æ–ª—å–∑—É–π –ø–æ–¥–∑–∞–ø—Ä–æ—Å—ã, WITH (CTE) –∏–ª–∏ ARRAY JOIN –¥–ª—è –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏.
        –°–Ω–∞—á–∞–ª–∞ –∏–∑–≤–ª–µ–∫–∏ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (–∫–∞–∫ —Å—Ç—Ä–æ–∫–∏), –∑–∞—Ç–µ–º —Ñ–∏–ª—å—Ç—Ä—É–π —Ü–µ–ª–µ–≤—ã–µ –ª–æ–≥–∏ –ø–æ –Ω–∏–º.

    –î–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏–π –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏–π:
        –ò—Å–ø–æ–ª—å–∑—É–π —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è, –Ω–∞–ø—Ä–∏–º–µ—Ä:
        extract(message, '–∫–ª—é—á=([^ ]+)') –∏–ª–∏
        REGEXP_EXTRACT(message, '–∫–ª—é—á=(.+?)').
        –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –ª—é–±—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (—Å—Ç—Ä–æ–∫–∏, —á–∏—Å–ª–∞, UUID), –∞ –Ω–µ —Ç–æ–ª—å–∫–æ —á–∏—Å–ª–∞.

    –î–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏:
        –ò—Å–ø–æ–ª—å–∑—É–π LIKE –∏–ª–∏ REGEXP –¥–ª—è —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —à–∞–±–ª–æ–Ω–æ–≤.
        –í –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∞—Ö –∏–∑ –∫–æ–¥–∞ –ø–æ–¥—Å—Ç–∞–≤–ª—è–π % –∏–ª–∏ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≥—Ä—É–ø–ø—ã.
        –ü—Ä–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏—è—Ö –∏—Å–ø–æ–ª—å–∑—É–π IN.

    –í—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–π –∏—Å—Ö–æ–¥–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ –ª–æ–≥–æ–≤ –±–µ–∑ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ (–µ—Å–ª–∏ —è–≤–Ω–æ –Ω–µ —Å–∫–∞–∑–∞–Ω–æ).

    –í—Å–µ–≥–¥–∞ –¥–æ–±–∞–≤–ª—è–π ORDER BY timestamp DESC.

    –í—Å–µ–≥–¥–∞ –¥–æ–±–∞–≤–ª—è–π LIMIT 1000.

    –ò—Å–ø–æ–ª—å–∑—É–π —Ç–æ–ª—å–∫–æ —Ç–∞–±–ª–∏—Ü—É logs.

    –í –æ—Ç–≤–µ—Ç–µ –≤—ã–≤–æ–¥–∏ —Ç–æ–ª—å–∫–æ SQL –≤–Ω—É—Ç—Ä–∏ –±–ª–æ–∫–∞

    ...

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã logs:

id UInt64,
timestamp DateTime,
log_level String,
message String

–ü—Ä–∏–º–µ—Ä—ã:

–ü—Ä–∏–º–µ—Ä 1:

–®–∞–±–ª–æ–Ω—ã:

logger.info("start send message for userName={} and id={}", user.getName(), user.getId());
logger.info("created message for userName={} and id={}", user.getName(), user.getId());
logger.info("system healthcheck. status=working")
logger.info("message send completed for id={}", user.getId());
logger.error("message send failed for id={}", user.getId());

–ó–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

    –û—Ç–ø—Ä–∞–≤–∏–ª–æ—Å—å –ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å id 111?

–û—Ç–≤–µ—Ç:

SELECT id, timestamp, log_level, message
FROM logs
WHERE lower(message) LIKE '%id=111%'
ORDER BY timestamp DESC
LIMIT 1000;

–ü—Ä–∏–º–µ—Ä 2 (—Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å—é):

–®–∞–±–ª–æ–Ω—ã:

logger.info("start send message. userId={}, requestId={}", user.getId(), requestId);
logger.info("send completed success. requestId={}", requestId);
logger.warn("send failed. requestId={}", requestId);

–ó–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

    –î–æ—Å—Ç–∞–≤–ª–µ–Ω–æ –ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å userId=abc-123-uuid?

–û—Ç–≤–µ—Ç:

WITH request_ids AS (
    SELECT extract(message, 'requestId=([^ ]+)') AS requestId
    FROM logs
    WHERE lower(message) LIKE '%start send message. userid=abc-123-uuid%'
)
SELECT l.id, l.timestamp, l.log_level, l.message
FROM logs l
INNER JOIN request_ids r ON l.message LIKE concat('%requestId=', r.requestId, '%')
WHERE lower(l.message) LIKE '%send completed success.%'
   OR lower(l.message) LIKE '%send failed.%'
   OR lower(l.message) LIKE '%start send message.%'
ORDER BY l.timestamp DESC
LIMIT 1000;

–í—ã–ø–æ–ª–Ω–∏ –¥–ª—è:

–ó–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
"{{–≤—Å—Ç–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å —Å—é–¥–∞}}"

–®–∞–±–ª–æ–Ω—ã –ª–æ–≥–æ–≤ –∏–∑ –∫–æ–¥–∞:
"{{–≤—Å—Ç–∞–≤–∏—Ç—å —à–∞–±–ª–æ–Ω—ã —Å—é–¥–∞}}"


2. –ü—Ä–æ–º—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ª–æ–≥–æ–≤:
–¢—ã ‚Äî senior DevOps –∏–Ω–∂–µ–Ω–µ—Ä —Å –æ–ø—ã—Ç–æ–º –∞–Ω–∞–ª–∏–∑–∞ –ª–æ–≥–æ–≤.
–ê–Ω–∞–ª–∏–∑–∏—Ä—É–π –ª–æ–≥–∏ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –∑–∞–ø—Ä–æ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
- –í—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞–∫–æ–Ω–æ–º–µ—Ä–Ω–æ—Å—Ç–∏ –∏ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏
- –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–æ–±—ã—Ç–∏–π  
- –£—Ä–æ–≤–Ω–∏ —Å–µ—Ä—å–µ–∑–Ω–æ—Å—Ç–∏ –∏ —ç—Å–∫–∞–ª–∞—Ü–∏–∏
- –û–ø—Ä–µ–¥–µ–ª–∏, –∫–∞–∫–∏–µ –ª–æ–≥–∏ —Ä–µ–∞–ª—å–Ω–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã –∑–∞–ø—Ä–æ—Å—É

–ó–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: "{{–≤—Å—Ç–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å —Å—é–¥–∞}}"

–ù–∞–π–¥–µ–Ω–Ω—ã–µ –ª–æ–≥–∏: "{{–≤—Å—Ç–∞–≤–∏—Ç—å –ª–æ–≥–∏ —Å—é–¥–∞}}"

–í–µ—Ä–Ω–∏ JSON: { "analysis": "—á–µ–ª–æ–≤–µ—á–µ—Å–∫–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ", "relevant_logs": [–º–∞—Å—Å–∏–≤ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –ª–æ–≥–æ–≤] }